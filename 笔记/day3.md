# day3

## 获取用户的信息和token理解

登录成功之后获取用户的信息

使用Pinia进行收集 存储

后台的数据库存储用户的信息

后台进行查询 

token用来区分用户的身份

注意！！！：

- Pinia当中存储Pinia的数据

- 登录的时候直接拿到token 在请求拦截器的地方设置携带请求头发送请求

  ```ts
  request.interceptors.request.use((config) => {
      //config配置对象 有一个headers属性请求头 经常给服务器端携带公共的参数
      //可以携带token来证用户信息 将token携带发送请求
      
      if(useUserStore().token){
          config.headers.token = useUserStore().token
      }
  
      return config
  })
  ```

- 这样就能拿到正确的数据 在Pinia当中进行储存

- 之后使用直接导入User仓库进行使用即可

- 注意发送请求的函数和收到请求的函数都在Pinia当中好进行操作

## 退出登录业务

退出登录 + 清除token

退出登录的函数在Pinia当中整

路由跳转在方法中整

退出登录的函数就是清除数据

清除token

然后进行路由跳转即可

### 从哪里退出在从哪里进去的实现

在path中新增加一个参数query这样我们就能使用这个参数进行设置

传递的参数 之后我们再次进行登录的时候使用route进行判断是否有这个参，

再次进行跳转

## 路由鉴权之进度业务

通过全局导航守卫解决：

在路由切换的时候执行自定义逻辑，允许在跳转前，后或导航确认之前进行拦截和处理，常用于身份验证 权限控制 数据加载等等

使用 nprogress的插件

使用的时候引入样式 并且在前置守卫的地方start

在后置守卫的地方end

就可以展示进度条

## 路由鉴权

判断登录网页

全部路由 ： 登录 404 任意路由 权限管理 商品管理模块 数据大屏等等

没有登录的一部分是不能及逆行访问的 只有login才能登录 使用的时候指向login

登录成功之后 不能访问login 只能访问其他的 访问login 时候访问首页

## 真实接口的替换

使用vite自带的代理域名就可以解决

## ts类型的定义

## 品牌管理模块的搭建

使用el组件进行使用

插槽的使用

想用div展示使用prop

不行 就使用`template #={row , $index}`进行展示

展示业务的搭建

## 品牌ts类型的定义

设置type类型文件中定义类型 引用就行

## 对话框静态的搭建

## 收集新增的品牌

拿到收集的数据

发送请求请求 添加数据

发送请求 拿到请求成功的数据

再次进行渲染

## 修改已有的品牌数据

将已经存在的品牌进行修改

使用row拿到对应的值

替换的时候直接进行替换就行

接口一定要封装好就行了

## 品牌模块的表单校验功能

学会使用nextTick的使用 ： 能够拿到对应的变化的元素的组件的实例

能够获取更新之后的DOM

解决异步的渲染问题

在DOM更新之后立即执行

然后学会使用ref拿到对应的实例i对象

还是使用rules 进行自定义的表单验证

## 品牌删除业务

设置对应的品牌删除模块

设置接口

进行删除 还有就是一些简单的细节优化
